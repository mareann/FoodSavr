    <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#">FoodSavr</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="active"><a href="/">About</a></li>
                <li><a href="/donors">Donor Sign Up Form</a></li>
                <li><a href="/charity">Charity Sign Up Form</a></li>
                <li class="dropdown">
                  <a href="/" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Our Members <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="/charities">Our Charities</a></li>
                    <li><a href="/donor">Our Donors</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </div>
<div class="container">
      <div class="jumbotron">
        <h1>Food Waste Reduction Through Donation</h1>
        <p>Roughly one third of the food produced in the world for human consumption every year, approximately 1.3 billion tons, gets lost or wasted.</p>
       </div>
    </div>

<div class="container">
     <section id="services" class="services-section" >
           <div class="container-fluid" >
            <div class="col-lg-12">
            <div class="col-md-4">
                <img src="http://d3n8a8pro7vhmx.cloudfront.net/themes/55cbcf38ebad646519000001/attachments/original/1445376221/charities_icon.png?1445376221" />
                <h2 class="text-green">Donors</h2>
                <p>Restaurants, grocery stores, and farms who have excess food left over at the end of the day can opt to drop off.</p>
            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                <div class="panel panel-default">
                  <div class="panel-heading" role="tab" id="headingOne">
                  </div>
                  <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                    <div class="panel-body text-white">
                    </div>
                  </div>
                </div>

                <div class="panel panel-default">
                  <div class="panel-heading" role="tab" id="headingThree">
                    <h4 class="panel-title">
                      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                  </a>
                    </h4>
                  </div>
                  <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
                    <div class="panel-body text-white">
                        <br>
                        <a href="https://d3n8a8pro7vhmx.cloudfront.net/foodcowboy/pages/12/attachments/original/1520342876/Supply_Chain_brochure.pdf?1520342876"></a>

                   </div>
                  </div>
                </div>
              </div>

            </div>

            <div class="col-md-4">
                <img src="http://d3n8a8pro7vhmx.cloudfront.net/themes/55cbcf38ebad646519000001/attachments/original/1439774240/heart_icon.png?1439774240"/>
                <h2 class="text-white">Charities</h2>
                 <p>Food bank or charity who is able to accept excess food for your community. We ensure that the food is fresh.</p>
            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                <div class="panel panel-default">
                  <div class="panel-heading" role="tab" id="headingOne">
                      <h4 class="panel-title">
                      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
                  </a>
                   </h4>
                  </div>
                  <div id="collapseSeven" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSeven">
                    <div class="panel-body text-white">
                            
                    </div>
                  </div>
                </div>

                <div class="panel panel-default">
                  <div class="panel-heading" role="tab" id="headingNine">
                    <h4 class="panel-title">
                      <a class="collapsed"  href="registration">
                  </a>
                    </h4>
                  </div>
                  
                  </div>
                </div>
              </div>



            <div class="col-md-4">
                <img src="http://d3n8a8pro7vhmx.cloudfront.net/themes/55cbcf38ebad646519000001/attachments/original/1445376221/charities_icon.png?1445376221" />
                <h2 class="text-white">Who We Are</h2>
                <p>We're the liason between reataurants, groceries, and farms in order to send their excess food and goods to local charities and food banks.</p>
            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                <div class="panel panel-default">
                  <div class="panel-heading" role="tab" id="headingOne">
                      <h4 class="panel-title">
                      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTen" aria-expanded="false" aria-controls="collapseTen">
                  </a>
                   </h4>
                  </div>
                  <div id="collapseTen" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTen">
                    <div class="panel-body text-white">
                    </div>
                  </div>
                </div>

                    <div class="panel panel-default">
                      <div class="panel-heading" role="tab" id="headingThree">
                        <h4 class="panel-title">
                          <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseEleven" aria-expanded="false" aria-controls="collapseEleven">
                      </a>
                        </h4>
                      </div>
                      <div id="collapseEleven" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
                        <div class="panel-body text-white">
                       </div>
                      </div>
                    </div>
                  </div>

                </div>
        </div>

 </section>

<section>
    <div class="twitter-feed">
    <a class="twitter-timeline" href="https://twitter.com/Food_Savr">Tweets by Food_Savr</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>

  
</div>
</div>
</div>

    <div class="footer">
    <a href="https://twitter.com/Food_Savr?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">Follow @Food_Savr</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>

    <style>
    .twitter-feed {
        width: 400px;
        height: 400px;
    }
    
    .footer {
        margin-top: 100px;
    }

    </style>

    <div class="donor-form">
    <form>
    First name:<br>
    <input type="text" name="firstname" id="firstName" value=" "><br>
    Last name:<br>
    <input type="text" name="lastname" id="lastName" value=" "><br><br>
    Food Type:<br>
    <input type="foodTypeId" name="foodtype" id="foodType" value="food"><br><br>
    Donor id<br>
    <input type="donorId" name="donor" id="donorId" value="donor"><br><br>
    Donor Location<br>
    <input type="donorLocation" name="donorLocation" id="locationId" value="donorLocation"><br><br>
    Donor Comments<br>
    <input type="donorComments" name="donorComments" value="donorComments" id="comments"><br><br>
    Available Beg Time<br>
    <input type="availableBegTime" name="availableBegTime" id="begTime" value="availableBegTime"><br><br>
    Available End Time<br>
    <input type=" availableEndTime" name="availableEndTime" id="endTime" value=" availableEndTime"><br><br>
    Charity Id<br>
    <input type="charityId" name="CharityId" id="charityId" value="charityId"><br><br>
   
    
    <input type="submit" value="Submit" id="donorSubmit">
    </form>
    </div>
  </section>

    <div class="donations">
<ul>
  {{#each FoodDonations}}
   {{#unless charityPickedUpFlag}}
      <li id="unclaimed">
        <p>
        Donation Number: {{this.id}} <span>Food id: </span> {{this.foodTypeId}} </p> 
        <p> Donor Location: {{this.donorLocation}} </p> <span> Donor Comments: {{this.donorComments}} </span><p> Donor Pick Up Start Time: {{this.availableBegTime}} Donor Pick Up End Time: {{this.availableEndTime}}</p> <p> Distance: {{this.distanceToCharity}} </p>
        <button data-foodid="{{this.id}}" class="food">Claim donation</button>
        </p>
      </li>
  {{/unless}}
  {{/each}}
</ul>

</div>


      <!-- FOOTER -->
      <footer>
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p>&copy; Created by: Maryann, Angela Frys, & Sarah Learner &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
      </footer>

    </div><!-- /.container -->
    
    </div>
  </section>
</div>


<script>

$(function() {

  console.log("foodSavr")
  $("#donorSubmit").on("click", function(event) { //was async
    event.preventDefault();
    var YardsInMile = 1760;
    var first_name = $("#firstName").val().trim();
    var last_name = $("#lastName").val().trim();
    var food_type = $("#foodType").val().trim();
    var donor_id = $("#donorId").val().trim();
    var location_id = $("#locationId").val().trim();
    var comments = $("#comments").val().trim();
    var start_time = $("#begTime").val().trim();
    var end_time = $("#endTime").val().trim();
    var charity_id = $("#charityId").val().trim();
    var charityPickedUpFlag= 0;
    console.log("name "+first_name+" "+last_name+" food_type "+food_type); 
    console.log("food "+food_type+" donor "+donor_id+" loc "+location_id);
    console.log("comments "+comments);
    console.log("start_time "+start_time+" end_time "+end_time);
    console.log("charity_id "+charity_id);
    console.log("charity pickedup " + charityPickedUpFlag);
//origin 1, Chicago Community Ministry, 6525 N Clark St., Chicago, IL, 60626, Mr. Smith, C123, 1, , (773)761-6688, , , 1, 1, 0, 0, u, p
//destination 2, Food4Less Washington Square, 4821 W North Ave, Chicago, IL, 60639, Ms McDougal, 2, 1, p@food.com, (773)235-1783, @Wash, , 1, 1, 0, 0, m, p

      var origin = "6525 N Clark St., Chicago, IL, 60626";
      var destination = "4821 W North Ave, Chicago, IL, 60639";

      var service = new google.maps.DistanceMatrixService;
        service.getDistanceMatrix({
          origins: [origin],
          destinations: [destination],
          travelMode: 'DRIVING',
          unitSystem: google.maps.UnitSystem.IMPERIAL,
          avoidHighways: false,
          avoidTolls: false
        }, function(response, status) {
          if (status !== 'OK') {
            alert('Error was: ' + status);
          } else {
            var originList = response.originAddresses;
            var destinationList = response.destinationAddresses;
            //var outputDiv = document.getElementById('output');
            //outputDiv.innerHTML = '';
            };

            for (var i = 0; i < originList.length; i++) {
              var results = response.rows[i].elements;
              for (var j = 0; j < results.length; j++) {
                //outputDiv.innerHTML 
               // var output += originList[i] + ' to ' + destinationList[j] +
                //    ': ' + results[j].distance.text + ' in ' +
                //    results[j].duration.text + '<br>';
              }
            }
            console.log("distance results "+JSON.stringify(results));
            var distance = (results[0].distance.value/YardsInMile).toFixed(2);
            console.log("distance is "+distance)
      var newFoodDonation = {
      foodTypeId:       food_type,
      foodImageUrl:     "",
      donorId:          donor_id,
      donorLocation:    location_id,
      donorComments:    donorComments,
      availableBegTime: availableBegTime,
      availableEndTime: availableEndTime,
      charityId:        charity_id,
      charityPickedUpFlag: 0,
      distanceToCharity: 0
    };
    $.ajax("/distancecalc", {
      type: "GET",
      data: {location: location_id}
    }).then(
      function() {
        console.log("sent /distancecalc", location_id);
        //back here, we have the json object from the backend for the nearest charity
        //do something with that, idk, whatever
      }
    );


    console.log("newFoodDonation "+JSON.stringify(newFoodDonation));
  // Send the PUT request.
    $.ajax("/api/donations", {
      type: "POST",
      data: newFoodDonation
    }).then(
      function() {
        console.log("sent /api/donations", newFoodDonation);
        // Reload the page to get the updated list
        //location.reload();
      }
    ); // end .then


    


           // console.log("distance output "+results);
  }); // end service.getDistanceMatrix function

  }); //donor submit function end

  $(".food").on("click", function(event) {
    var id = $(this).data("foodid");

    var charityPickedUp = {
      charityPickedUpFlag: 1
    };
    
    $.ajax("/api/donations/" + id, {
      type: "PUT",
      data: charityPickedUp
    }).then(
      function() {
      	console.log("You claimed the donation");
      	location.reload();
      }
    )
   })
  });

</script>



